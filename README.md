# HELIOS : R√©duction de l'impact √©cologique du service num√©rique d'un √©tablissement de m√©t√©orologie et de climatologie

## Choix du sujet
Nous revenons tous deux d'un semestre √† l'√©tranger dans deux pays avec une m√©t√©o tr√®s distincte. En Norv√®ge la m√©t√©o √©tait particuli√®rement changeante et extr√™me par moments. Consulter la m√©t√©o chaque jour est devenu une habitude, de m√™me que la programmation journali√®re d'une notification r√©capitulative.

Aussi, nous nous sommes rendus compte que les habitudes de consommation des services de m√©t√©o sont tr√®s diff√©rentes selon les r√©gions du monde et leur climat. Dans les pays aux climats extr√™mes, les habitants consultent plus r√©guli√®rement ces services pour pr√©venir les averses ou √©v√®nements climatiques (orages, ouragans, canicules, etc). Avec le d√©r√®glement climatique, le nombre de ces √©v√®nements ne va qu'augmenter, ce qui fait que le nombre de potentiels utilisateurs ne va cesser de cro√Ætre ([source: Courrier International](https://www.courrierinternational.com/article/technologie-face-au-rechauffement-climatique-les-applications-de-meteo-ont-le-vent-en-poupe)).

M√©t√©o France est le principal service de m√©t√©o en France avec plus de 11 millions utilisateurs mensuels. C'est une r√©f√©rence en la mati√®re, mais en remarquant le poids et la complexit√© du site, nous nous sommes attach√©s √† concevoir une alternative avec un plus faible impact environnemental.


## Utilit√© sociale

A une √©poque o√π la situation climatique est de plus en plus incertaine et changeante, se renseigner sur la m√©t√©o est primordial. De plus, regarder la m√©t√©o du jour est une action quotidienne pour des millions d'utilisateurs et touche un large public. 
En plus d'informer sur la m√©t√©o nationale, un tel service se doit de sensibiliser sur le r√©chauffement climatique et les catastrophes m√©t√©orologiques qu'il cause. 

M√©t√©o France est un √©tablissement public √† caract√®re administratif ([source : M√©t√©o France](https://meteofrance.fr/etablissement)) charg√© de missions en mati√®re de s√©curit√© m√©t√©orologique des personnes et des biens. C'est un √©tablissement qui remplit une mission d'int√©r√™t g√©n√©ral sous contr√¥le de l'Etat. Son service num√©rique est donc reconnu pour son utilit√© sociale.

## Effets de la num√©risation

L'histoire des pr√©visions m√©t√©oroligiques est relativement jeune et connait son av√®nement avec l'informatique et les satellites. Avant le Web c'est via la presse √©crite et la radio que les pr√©visions √©taient communiqu√©es.
D√©sormais c'est via des applications mobiles principalement qu'elle est diffus√©e. On en comptait plus de 10 000 en 2023 et ce nombre ne va cesser d'augmenter. Cependant l'√©norme majorit√© des services se basent uniquement sur l'un des cinq mod√®les ouverts suivants :

- Mod√®le europ√©en ECMWF,
- Mod√®le am√©ricain GFS,
- Mod√®le fran√ßais Arome (M√©teo France),
- Mod√®le fran√ßais Arp√®ge (M√©teo France),
- Mod√®le allemand Icon.

([source : Lib√©ration](https://www.liberation.fr/environnement/climat/face-a-meteo-france-des-concurrents-comme-sil-en-pleuvait-20240318_NKJTT4HMXJFERBRJYU2YHJVY3E/))

En 2022 le march√© mondial des services de pr√©visions m√©t√©orologiques pesait 2,20 milliards d'euros, et c'est un chiffre qui est attendu √† la hausse pour les ann√©es √† suivre ([source : Statista](https://www.statista.com/outlook/dmo/app/weather/worldwide)).

L'impact √©cologique de cette substitution du papier et de la radio par les applications mobiles est compliqu√© √† √©tablir. N√©anmoins √©tant donn√© le changement des habitudes de consommation des utilisateurs et la multiplication des plateformes m√©t√©o, il para√Æt pertinent de proposer une alternative plus sobre. Avec l'essor de l'IA, les GAFAM s'int√©ressent √©galement √† la pr√©vision m√©t√©orologique pour tenter de produire des mod√®les toujours plus pr√©cis. Ces petites am√©liorations de performance ne sont pas forc√©ment n√©cessaires et ont un fort impact environnemental car elles n√©cessitent de nombreux serveurs et √©quipements num√©riques.

## Axes de travail

Notre premier axe de travail sera dirig√© autour des publicit√©s du site de m√©t√©o france. En effet, le site contient de nombreuses images et vid√©os provenant de publicit√© ainsi que des "pop-ups". Pour r√©duire l'impact √©cologique de la page, mais aussi r√©duire le temps de chargement, il nous para√Æt pertinent de les supprimer pour obtenir une page plus √©pur√©e. 
Dans un second temps, nous souhaitons √©galement enlever la grande majorit√© des articles en fin de page. Sur la page d'accueil du site, la seconde partie est uniquement constitu√©e d'articles avec une image ou vid√©o pour le pr√©senter. Toujours dans la m√™me optique, nous souhaitons rendre la page plus pertinente et moins √©nergivore en ne laissant qu'un article. De ce fait, l'utilisateur aura plus de chances √©galement de s'int√©resser s'il n'est pas submerg√© par la quantit√©. 
Toujours pour les m√™mes raisons, nous allons remplacer la carte de france qui est l'√©l√©ment central de la page. Il sera possible par exemple de la remplacer par un tableau des temp√©ratures et conditions m√©t√©orologiques tout au long de la journ√©e.
Enfin, l'application se doit √©galement d'√™tre accessible et pertinente pour le plus grand nombre. Ainsi, nous ajouterons une partie professionnelle, notamment avec la m√©t√©o agricole pour les utilisateurs qui auront besoin d'informations compl√©mentaires et plus pr√©cises pour centraliser les informations dans un m√™me endroit.


## Sc√©nario 1 : Consulter la m√©t√©o
1. L'utilisateur de m√©t√©o en ligne se rend sur la page d'accueil gr√¢ce √† un favori (donc sans passer par un moteur de recherche). Il cherche l'onglet m√©t√©o de sa r√©gion.
2. Il choisit de voir la m√©t√©o de sa r√©gion.
3. Il consulte la m√©t√©o du lendemain et des jours prochains.

Les r√©sultats de performance sont assez diff√©rents entre M√©t√©o France, Yr et la M√©t√©o Agricole. M√©t√©o France et la M√©t√©o Agricole ont beaucoup de pubs et de cookies qui alourdissent la page et augmente le r√©seau n√©cessaire.

## Sc√©nario 2 : Consulter des articles
1. L'utilisateur de m√©t√©o en ligne se rend sur la page d'accueil gr√¢ce √† un favori (donc sans passer par un moteur de recherche). Il consulte les titres.
2. Il choisit un des articles et le lit en entier.
3. Il choisit un autre article √† consulter parmi ceux pr√©sents en bas.
4. Il le lit jusqu'au bout


## Impact de l'ex√©cution des sc√©narios aupr√®s de diff√©rents services concurrents

L'EcoIndex d'une page (de A √† G) est calcul√© (sources : [EcoIndex](https://www.ecoindex.fr/comment-ca-marche/), [Octo](https://blog.octo.com/sous-le-capot-de-la-mesure-ecoindex), [GreenIT](https://github.com/cnumr/GreenIT-Analysis/blob/acc0334c712ba68939466c42af1514b5f448e19f/script/ecoIndex.js#L19-L44)) en fonction du positionnement de cette page parmi les pages mondiales concernant :

- le nombre de requ√™tes lanc√©es,
- le poids des t√©l√©chargements,
- le nombre d'√©l√©ments du document.

Nous avons choisi de comparer l'impact des sc√©narios sur les services de quotidiens nationaux de diverses sensibilit√©s politiques, √©conomiques et environementales :

- M√©t√©o France,
- Yr,
- M√©t√©o Agricole.

Les r√©sultats sont les suivants (attention, d'une journ√©e √† l'autre, on peut observer une certaine variabilit√©) :

- Sc√©nario "[Consulter la m√©t√©o de ma r√©gion](https://htmlpreview.github.io/?https://raw.githubusercontent.com/UTT-GL03/helios/main/benchmark/consulterMeteo/results.html)",
- Sc√©nario "[Lire des articles parmi les articles de la page d'accueil](https://htmlpreview.github.io/?https://raw.githubusercontent.com/UTT-GL03/helios/main/benchmark/scenarioArticle/benchmark_.html)".

## Maquette de l'interface et √©chantillon de donn√©es

Au vu des diff√©rents services compar√©s, des exigences environnementales exprim√©es plus haut et des sc√©narios retenus, nous avons d√©fini pour notre prototype une maquette de l'interface et un √©chantillon de donn√©es r√©alistes.

L'interface retenue est compos√©e de deux types de "pages Web" :

- celle d'accueil, contenant la m√©t√©o du jour des principales villes fran√ßaises,
- celle qui donne plus d'informations sur la m√©t√©o d'une zone donn√©e ("interface pro").

![Maquette de la page d'accueil](./wireframe/FirstWireFrame.png)
__Fig.1__: Maquette de l'interface d'accueil du prototype

![Maquette de la page pro](./wireframe/ProPageWireFrame.png)
__Fig.2__: Maquette de l'interface pro du prototype


Pour des raisons de respect des droits d'auteurs, nous utilisons des donn√©es g√©n√©r√©es (avec [`dummy-json`](https://dummyjson.com)).
Bien que fictives, ces donn√©es correspondent √† la structure des services concurrents : 3 villes comportant la m√©t√©o pourchacun (temp√©rature, vent, m√©t√©o) sur 7 jours (voir [mod√®le de donn√©es](./frontend/sample_data.hbs)). 
Dans un objectif de sobri√©t√© environnementale, les articles sont limit√©s √† ceux du jour et de la veille.


## Prototype n¬∞1 : Fonctionnalit√©s pour le sc√©nario prioritaire avec donn√©es statiques

Pour cette premi√®re version du prototype :

- l'√©chantillon de donn√©es est encore charg√© dans le code de mani√®re statique,
- les fonctionnalit√©s impl√©ment√©es ne sont que celles n√©cessaires pour suivre le sc√©nario prioritaire ("Consulter la m√©t√©o").

Ce sc√©nario n√©cessite de pouvoir naviguer sur la page principale qui contient la m√©t√©o du jour. On se sert ensuite de la barre de recherche pour trouver la m√©t√©o de la ville qui nous int√©resse.

### Page principale

Nous avons donc d√©velopp√© la page d'accueil pour qu'elle affiche un √©chantillon de donn√©es m√©t√©o sous la forme d'un tableau, comme pr√©vu par la maquette. Elle affiche la m√©t√©o du jour pour 3 villes si aucune recherche n'est faite (cf. Fig. 3) et affiche la m√©t√©o de la semaine si l'utilisateur recherche une ville en particulier (cf. Fig. 4)

![Maquette de la page pro](./wireframe/mainPage.png)
__Fig.3__: Prototype de la page principal 

![Maquette de la page pro](./wireframe/mainPageResearch.png)
__Fig.4__: Prototype de la page principal avec une recherche

Pour l'instant, nous avons choisi le framework de mise en page minimaliste (PicoCSS). Dans la suite du projet, nous verrons si l'impact environnemental du passage √† un framework de mise en page plus puissant (comme Bootstrap ou Tailwind) est acceptable.

Nous avons choisi une librairie qui permet l'import d'icones pour afficher de mani√®re plus ludique la m√©t√©o. Par la suite, nous √©tudierons l'impact de l'utilisation d'une librairie par rapport √† l'import des fichiers .svg dans le projet.

Nous avons d√©cid√©, contrairement √† l'ensemble des services concurrents, de ne pas surcharger la page d'informations, d'articles ou encore d'une carte interactive qui n√©cessite beaucoup de ressource. 
Si de telles fonctionnalit√©s devaient √™tre introduites, il faudrait mettre en balance leurs utilit√©s et leurs impacts a priori important.

Dans l'√©tat actuel du prototype, il est possible d'avoir une premi√®re id√©e de l'impact environnemental du frontend. Bien entendu, il manque encore le chargement dynamique des donn√©es, mais nous pouvons d√©j√† √©valuer l'impact de l'affichage des donn√©es et du framework (au sens large : React, PicoCSS, DayJS). Cette √©valuation de l'impact (cf. Tab.1) est d√©j√† encourageante en mode "d√©veloppement" mais encore plus en mode "pr√©-production". Nous mesurons ici l'effet positif de l'adoption d'outils de d√©veloppement Web int√©grant la "minification" (cf. Wikip√©dia) du code et la concat√©nation du code d'une part et des feuilles de style d'autre part.



|   | EcoIndex| GES (gCO2e) | Taille du DOM | Requ√™tes | Taille de la page (ko)
|---|--------:|------------:|--------------:|---------:|---------------------:
| Mode "d√©veloppement"  | 76 Büü¢ |  1,4 | 64 | 24 | 4609
| Mode "pr√©-production" | 93.06 Aüü¢ | 1,14 | 61 | 4 | 76 

__Tab.1__: √âvaluation de l'impact du prototype de la page d'accueil.
